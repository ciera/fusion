<html><body><link rel="stylesheet" type="text/css" href="style.css"/><div id="posts"><!-- post #91813 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit91813" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post91813" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=91813&amp;postcount=1" target="new" rel="nofollow" id="postcount91813" name="1"><strong>1</strong></a> &nbsp;
			
			
			<a href="report.php?p=91813" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post91813"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 20th, 2006, 03:33 PM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_91813">
<a class="bigusername" href="member.php?u=15665">david_wliu</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="david_wliu is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_91813", true); </script>
</div>
<div class="smallfont">Junior Member</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Mar 2006</div>
<div>
						Posts: 21
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_91813">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
<strong>TransitionExecutingStateExceptionHandler</strong>
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_91813">
			
			I am able to configure TransitionExecutingStateExceptionHandler in my work flow to handle exceptions and to display the exception messges on jsp page.<br />
<br />
My question is how to keep the stacktrace be logged on server side? It was logged before but not anymore after I configued TransitionExecutingStateExceptionHandler.<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 66px;
		text-align: left;
		overflow: auto">    &lt;bean id=&quot;flowExceptionResolver&quot;
        class=&quot;org.springframework.webflow.engine.support.TransitionExecutingStateExceptionHandler&quot;&gt;
    &lt;/bean&gt;</pre>
</div><div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 146px;
		text-align: left;
		overflow: auto">    &lt;view-state id=&quot;displayError&quot; view=&quot;tilesDef.errorTiles&quot;&gt;
    &lt;/view-state&gt;

    &lt;global-transitions&gt;
        &lt;transition on-exception=&quot;java.lang.Exception&quot; to=&quot;displayError&quot; /&gt;
    &lt;/global-transitions&gt;
    
    &lt;exception-handler bean=&quot;flowExceptionResolver&quot; /&gt;</pre>
</div>Please advise.<br />
<br />
Thanks.
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=91813" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=91813" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_91813" /></a>
<a href="newreply.php?do=newreply&amp;p=91813" rel="nofollow" id="qr_91813" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 91813 popup menu -->
<div class="vbmenu_popup" id="postmenu_91813_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">david_wliu</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=15665">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="private.php?do=newpm&amp;u=15665" rel="nofollow">Send a private message to david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=15665" rel="nofollow">Find all posts by david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=15665">Add david_wliu to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 91813 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #91813 --><!-- post #91896 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit91896" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post91896" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=91896&amp;postcount=2" target="new" rel="nofollow" id="postcount91896" name="2"><strong>2</strong></a> &nbsp;
			
			
			<a href="report.php?p=91896" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post91896"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 03:02 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_91896">
<a class="bigusername" href="member.php?u=7550">klr8</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="klr8 is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_91896", true); </script>
</div>
<div class="smallfont">Senior Member</div>
<div class="smallfont">Spring Team</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Sep 2004</div>
<div>Location: Leuven, Belgium</div>
<div>
						Posts: 1,846
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_91896">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_91896">
			
			The stack trace is no longer logged since the exception is now 'handled' by the flow, so it no longer propagates up to Spring MVC or the Servlet engine where it will be logged.<br />
<br />
The TransitionExecutingStateExceptionHandler does do some logging, so if you enable debug logging for it, it will log the exception that it is handling. However, in 1.0 final it does not log the stack trace. I've improved this in 1.0.1 where it will also log the exception stack trace.<br />
<br />
Another option you have is to use a custom FlowExecutionExceptionHandler that does all the logging you want. You can ofcourse extend TransitionExecutingStateExceptionHandler and e.g. override the handle() method. In this case you will need to use the &lt;exception-handler&gt; element instead of the conveniece &quot;on-exception&quot; attribute of the transition element (which always registers a TransitionExecutingStateExceptionHandler).<br />
<br />
Erwin
		</div>
<!-- / message -->
<!-- edit note -->
<div class="smallfont">
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<em>
					
						Last edited by klr8; Dec 21st, 2006 at <span class="time">03:10 AM</span>.
					
					
				</em>
</div>
<!-- / edit note -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=91896" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=91896" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_91896" /></a>
<a href="newreply.php?do=newreply&amp;p=91896" rel="nofollow" id="qr_91896" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 91896 popup menu -->
<div class="vbmenu_popup" id="postmenu_91896_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">klr8</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=7550">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="http://www.ervacon.com">Visit klr8's homepage!</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=7550" rel="nofollow">Find all posts by klr8</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=7550">Add klr8 to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 91896 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #91896 --><!-- post #92068 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92068" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post92068" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92068&amp;postcount=3" target="new" rel="nofollow" id="postcount92068" name="3"><strong>3</strong></a> &nbsp;
			
			
			<a href="report.php?p=92068" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92068"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 11:26 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92068">
<a class="bigusername" href="member.php?u=15665">david_wliu</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="david_wliu is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92068", true); </script>
</div>
<div class="smallfont">Junior Member</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Mar 2006</div>
<div>
						Posts: 21
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92068">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
<strong>What's the proper way to configure my own handler</strong>
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92068">
			
			Hi Erwin,<br />
<br />
Following your suggestion, I went ahead overriding the handle() method in my own subclass of TransitionExecutingStateExceptionHandler. Then I tweak my flow configure file to use &lt;exception-handler&gt; instead of using transition's on-exception.<br />
<br />
Before, when I use the transition, I can always do it like this:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 114px;
		text-align: left;
		overflow: auto">    &lt;view-state id=&quot;displayError&quot; view=&quot;tilesDef.showErrorTiles&quot;&gt;
    &lt;/view-state&gt;

    &lt;global-transitions&gt;
        &lt;transition on-exception=&quot;java.lang.Exception&quot; to=&quot;displayError&quot; /&gt;
    &lt;/global-transitions&gt;</pre>
</div>But now, as you suggested, I will have to use &lt;exception-handler&gt; as follows:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 226px;
		text-align: left;
		overflow: auto">    &lt;view-state id=&quot;displayError&quot; view=&quot;tilesDef.showErrorTiles&quot;&gt;
    &lt;/view-state&gt;
    &lt;exception-handler bean=&quot;flowExceptionResolver&quot; /&gt; 
    &lt;bean id=&quot;flowExceptionResolver&quot;
        class=&quot;com.jpm.cristal.adminweb.except.SwfExceptionHandler&quot;&gt;
        &lt;property name=&quot;targetStateMappings&quot;&gt;
            &lt;map&gt;
                &lt;entry key=&quot;java.lang.Exception&quot;&gt;
                    &lt;value&gt;displayError&lt;/value&gt;
                &lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;</pre>
</div>Since the &quot;exceptionTargetStateMappings&quot; property doesn't have get/set method in the source of &quot;TransitionExecutingStateExceptionHandler&quot; class, so as you can see I defined my own &quot;targetStateMappings&quot; in my own class.<br />
<br />
However, I kind of stuck at this point because my own exception handler is not invoked any more. <br />
<br />
Can you tell me how to get the customized exception handler to be called by using &lt;exception-handler&gt; if not using &lt;transition on-exception...&gt;???<br />
<br />
Please help. Thanks.
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92068" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92068" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92068" /></a>
<a href="newreply.php?do=newreply&amp;p=92068" rel="nofollow" id="qr_92068" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92068 popup menu -->
<div class="vbmenu_popup" id="postmenu_92068_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">david_wliu</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=15665">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="private.php?do=newpm&amp;u=15665" rel="nofollow">Send a private message to david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=15665" rel="nofollow">Find all posts by david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=15665">Add david_wliu to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92068 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92068 --><!-- post #92071 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92071" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post92071" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92071&amp;postcount=4" target="new" rel="nofollow" id="postcount92071" name="4"><strong>4</strong></a> &nbsp;
			
			
			<a href="report.php?p=92071" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92071"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 11:31 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92071">
<a class="bigusername" href="member.php?u=7550">klr8</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="klr8 is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92071", true); </script>
</div>
<div class="smallfont">Senior Member</div>
<div class="smallfont">Spring Team</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Sep 2004</div>
<div>Location: Leuven, Belgium</div>
<div>
						Posts: 1,846
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92071">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92071">
			
			So your &quot;flowExceptionResolver&quot; is not getting called? Strange. It should be invoked normally. I'll investigate if I can see a bug.<br />
<br />
Try to put in a breakpoint in the handles() and handle() methods of the exception handler to see if they are invoked.<br />
<br />
Erwin
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92071" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92071" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92071" /></a>
<a href="newreply.php?do=newreply&amp;p=92071" rel="nofollow" id="qr_92071" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92071 popup menu -->
<div class="vbmenu_popup" id="postmenu_92071_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">klr8</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=7550">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="http://www.ervacon.com">Visit klr8's homepage!</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=7550" rel="nofollow">Find all posts by klr8</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=7550">Add klr8 to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92071 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92071 --><!-- post #92074 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92074" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post92074" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92074&amp;postcount=5" target="new" rel="nofollow" id="postcount92074" name="5"><strong>5</strong></a> &nbsp;
			
			
			<a href="report.php?p=92074" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92074"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 11:40 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92074">
<a class="bigusername" href="member.php?u=7550">klr8</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="klr8 is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92074", true); </script>
</div>
<div class="smallfont">Senior Member</div>
<div class="smallfont">Spring Team</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Sep 2004</div>
<div>Location: Leuven, Belgium</div>
<div>
						Posts: 1,846
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92074">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92074">
			
			I checked and I don't see an obvious bug in SWF. Are you sure you are correctly adding the exceptions to handle in the setTargetStateMappings() of your custom SwfExceptionHandler class?<br />
<br />
Erwin
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92074" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92074" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92074" /></a>
<a href="newreply.php?do=newreply&amp;p=92074" rel="nofollow" id="qr_92074" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92074 popup menu -->
<div class="vbmenu_popup" id="postmenu_92074_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">klr8</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=7550">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="http://www.ervacon.com">Visit klr8's homepage!</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=7550" rel="nofollow">Find all posts by klr8</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=7550">Add klr8 to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92074 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92074 --><!-- post #92078 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92078" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post92078" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92078&amp;postcount=6" target="new" rel="nofollow" id="postcount92078" name="6"><strong>6</strong></a> &nbsp;
			
			
			<a href="report.php?p=92078" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92078"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 11:50 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92078">
<a class="bigusername" href="member.php?u=15665">david_wliu</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="david_wliu is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92078", true); </script>
</div>
<div class="smallfont">Junior Member</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Mar 2006</div>
<div>
						Posts: 21
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92078">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92078">
			
			Hi Erwin, thanks for looking into this for me. Here is my subclass.<br />
<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">public class SwfExceptionHandler extends TransitionExecutingStateExceptionHandler {
    private static final Log log = LogFactory.getLog(SwfExceptionHandler.class);
    /**
     * The exceptionType-&gt;targetStateResolver map.
     */
    private Map&lt;String, String&gt; targetStateMappings = new HashMap&lt;String, String&gt;();

    public ViewSelection handle(FlowExecutionException e, RequestControlContext context) {
        log.error(e.getMessage(), e);
        for (String className : targetStateMappings.keySet()) {
            try {
                String stateID = targetStateMappings.get(className);
                Class cls = Class.forName(className).getClass();
                add(cls, stateID);
            }
            catch (ClassNotFoundException ex) {
                log.error(&quot;Exception class name (&quot; + className + &quot;) is not valid.&quot;, ex);
            }
        }
        return super.handle(e, context);
    }

    public Map&lt;String, String&gt; getTargetStateMappings() {
        return targetStateMappings;
    }

    public void setTargetStateMappings(Map&lt;String, String&gt; targetStateMappings) {
        this.targetStateMappings = targetStateMappings;
    }
}</pre>
</div>As I mentioned in my previous reply that I don't see a way to modify the private property &quot;exceptionTargetStateMappings&quot; in super class &quot;TransitionExecutingStateExceptionHandler&quot;, so I defined my own &quot;targetStateMappings&quot; map in my subclass and manipulate the target mapping in my handle() method shown above. Breakpoint is set at the first line in handle() method. I don't see it stops there.<br />
<br />
Here is how it configured in my detail-flow xml file, it's in the very end of the file:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 82px;
		text-align: left;
		overflow: auto">    &lt;view-state id=&quot;displayError&quot; view=&quot;tilesDef.showErrorTiles&quot;&gt;
    &lt;/view-state&gt;

    &lt;exception-handler bean=&quot;flowExceptionResolver&quot; /&gt;</pre>
</div>Then, in my bean xml file:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 178px;
		text-align: left;
		overflow: auto">    &lt;bean id=&quot;flowExceptionResolver&quot;
        class=&quot;com.jpm.cristal.adminweb.except.SwfExceptionHandler&quot;&gt;
        &lt;property name=&quot;targetStateMappings&quot;&gt;
            &lt;map&gt;
                &lt;entry key=&quot;java.lang.Exception&quot;&gt;
                    &lt;value&gt;displayError&lt;/value&gt;
                &lt;/entry&gt;
            &lt;/map&gt;
        &lt;/property&gt;
    &lt;/bean&gt;</pre>
</div>Please advise. Thanks.
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92078" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92078" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92078" /></a>
<a href="newreply.php?do=newreply&amp;p=92078" rel="nofollow" id="qr_92078" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92078 popup menu -->
<div class="vbmenu_popup" id="postmenu_92078_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">david_wliu</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=15665">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="private.php?do=newpm&amp;u=15665" rel="nofollow">Send a private message to david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=15665" rel="nofollow">Find all posts by david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=15665">Add david_wliu to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92078 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92078 --><!-- post #92080 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92080" style="padding:0px 0px 6px 0px">
<!-- this is not the last post shown on the page -->
<table class="tborder" id="post92080" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92080&amp;postcount=7" target="new" rel="nofollow" id="postcount92080" name="7"><strong>7</strong></a> &nbsp;
			
			
			<a href="report.php?p=92080" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92080"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 11:53 AM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92080">
<a class="bigusername" href="member.php?u=7550">klr8</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="klr8 is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92080", true); </script>
</div>
<div class="smallfont">Senior Member</div>
<div class="smallfont">Spring Team</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Sep 2004</div>
<div>Location: Leuven, Belgium</div>
<div>
						Posts: 1,846
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92080">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92080">
			
			Try to use the public add(Class exceptionClass, String targetStateId) method from your setTargetStateMappings method.<br />
<br />
This explains your problem by the way. You are not initializing the exceptionTargetStateMappings of the superclass (TransitionExecutingStateExceptionHandler), so it's handles() method will return false since you're not overriding it! Note that there is a &quot;handles()&quot; method AND a &quot;handle()&quot; method!<br />
<br />
That
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92080" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92080" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92080" /></a>
<a href="newreply.php?do=newreply&amp;p=92080" rel="nofollow" id="qr_92080" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92080 popup menu -->
<div class="vbmenu_popup" id="postmenu_92080_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">klr8</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=7550">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="http://www.ervacon.com">Visit klr8's homepage!</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=7550" rel="nofollow">Find all posts by klr8</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=7550">Add klr8 to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92080 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92080 --><!-- post #92096 -->
<!-- open content container -->
<div align="center">
<div class="page" style="width:100%; text-align:left">
<div style="padding:0px 0px 0px 0px" align="left">
<div id="edit92096" style="padding:0px 0px 6px 0px">
<table class="tborder" id="post92096" cellpadding="6" cellspacing="1" border="0" width="100%" align="center">
<tr>
<td class="thead">
<div class="normal" style="float:right">
			&nbsp;
			#<a href="showpost.php?p=92096&amp;postcount=8" target="new" rel="nofollow" id="postcount92096" name="8"><strong>8</strong></a> &nbsp;
			
			
			<a href="report.php?p=92096" rel="nofollow"><img class="inlineimg" src="images/buttons/report.gif" alt="Report Post" border="0" /></a> &nbsp;
			
			
		</div>
<div class="normal">
<!-- status icon and date -->
<a name="post92096"><img class="inlineimg" src="images/statusicon/post_old.gif" alt="Old" border="0" /></a>
			
				Dec 21st, 2006, 01:00 PM
			
			
			<!-- / status icon and date -->
</div>
</td>
</tr>
<tr>
<td class="alt2" style="padding:0px">
<!-- user info -->
<table cellpadding="0" cellspacing="6" border="0" width="100%">
<tr>
<td nowrap="nowrap">
<div id="postmenu_92096">
<a class="bigusername" href="member.php?u=15665">david_wliu</a>
<img class="inlineimg" src="images/statusicon/user_offline.gif" alt="david_wliu is offline" border="0" />
<script type="text/javascript"> vbmenu_register("postmenu_92096", true); </script>
</div>
<div class="smallfont">Junior Member</div>
</td>
<td width="100%">&nbsp;</td>
<td valign="top" nowrap="nowrap">
<div class="smallfont">
<div>Join Date: Mar 2006</div>
<div>
						Posts: 21
					</div>
<div> </div>
</div>
</td>
</tr>
</table>
<!-- / user info -->
</td>
</tr>
<tr>
<td class="alt1" id="td_post_92096">
<!-- message, attachments, sig -->
<!-- icon and title -->
<div class="smallfont">
<img class="inlineimg" src="images/icons/icon1.gif" alt="Default" border="0" />
<strong>Hallelujah !</strong>
</div>
<hr size="1" style="color:#D1D1E1; background-color:#D1D1E1" />
<!-- / icon and title -->
<!-- message -->
<div id="post_message_92096">
			
			Hi Erwin, it works like charm now. <br />
<br />
Here is the final version of my subclass following your suggestion:<br />
<div style="margin:20px; margin-top:5px">
<div class="smallfont" style="margin-bottom:2px">Code:</div>
<pre class="alt2" dir="ltr" style="
		margin: 0px;
		padding: 6px;
		border: 1px inset;
		width: 800px;
		height: 498px;
		text-align: left;
		overflow: auto">public class SwfExceptionHandler extends TransitionExecutingStateExceptionHandler {
    private static final Log log = LogFactory.getLog(SwfExceptionHandler.class);
    /**
     * The exceptionType-&gt;targetStateResolver map.
     */
    private Map&lt;String, String&gt; targetStateMappings = new HashMap&lt;String, String&gt;();

    public ViewSelection handle(FlowExecutionException e, RequestControlContext context) {
        log.error(e.getMessage(), e);
        return super.handle(e, context);
    }

    public Map&lt;String, String&gt; getTargetStateMappings() {
        return targetStateMappings;
    }

    public void setTargetStateMappings(Map&lt;String, String&gt; targetStateMappings) {
        this.targetStateMappings = targetStateMappings;
        for (String className : targetStateMappings.keySet()) {
            try {
                String stateID = targetStateMappings.get(className);
                Class cls = Class.forName(className);
                add(cls, stateID);
            }
            catch (ClassNotFoundException ex) {
                log.error(&quot;Exception class name (&quot; + className + &quot;) is not valid.&quot;, ex);
            }
        }
    }
}</pre>
</div>The xml configurations stay the same as in my last reply.<br />
<br />
Thanks again.
		</div>
<!-- / message -->
<div style="margin-top: 10px" align="right">
<!-- controls -->
<a href="newreply.php?do=newreply&amp;p=92096" rel="nofollow"><img src="images/buttons/quote.gif" alt="Reply With Quote" border="0" /></a>
<a href="newreply.php?do=newreply&amp;p=92096" rel="nofollow" onclick="return false"><img src="images/buttons/multiquote_off.gif" alt="Multi-Quote This Message" border="0" id="mq_92096" /></a>
<a href="newreply.php?do=newreply&amp;p=92096" rel="nofollow" id="qr_92096" onclick="return false"><img src="images/buttons/quickreply.gif" alt="Quick reply to this message" border="0" /></a>
<!-- / controls -->
</div>
<!-- message, attachments, sig -->
</td>
</tr>
</table>
<!-- post 92096 popup menu -->
<div class="vbmenu_popup" id="postmenu_92096_menu" style="display:none;">
<table cellpadding="4" cellspacing="1" border="0">
<tr>
<td class="thead">david_wliu</td>
</tr>
<tr><td class="vbmenu_option"><a href="member.php?u=15665">View Public Profile</a></td></tr>
<tr><td class="vbmenu_option"><a href="private.php?do=newpm&amp;u=15665" rel="nofollow">Send a private message to david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="search.php?do=finduser&amp;u=15665" rel="nofollow">Find all posts by david_wliu</a></td></tr>
<tr><td class="vbmenu_option"><a href="profile.php?do=addlist&amp;userlist=buddy&amp;u=15665">Add david_wliu to Your Contacts</a></td></tr>
</table>
</div>
<!-- / post 92096 popup menu -->
</div>
</div>
</div>
</div>
<!-- / close content container -->
<!-- / post #92096 --><div id="lastpost"></div></div></body></html>